(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-933e19d4"],{"129f":function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},"7c8c7":function(t,e,a){"use strict";a.r(e);var n,s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"dtc-main-section"},[a("header",{staticClass:"ask-header"},[t._v("健康通行證維護")]),a("div",{staticClass:"dtc-search pl-2"},[a("b-input-group",{attrs:{prepend:"關鍵字"}},[a("b-input",{attrs:{placeholder:"搜尋關鍵字"},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.searchDb(e)}},model:{value:t.Code,callback:function(e){t.Code="string"===typeof e?e.trim():e},expression:"Code"}})],1),a("b-button",{staticClass:"mr-1",attrs:{variant:"light",size:"sm"},on:{click:t.searchDb}},[a("i",{staticClass:"fas fa-search"}),t._v("進行查詢 ")]),a("b-button",{attrs:{variant:"info",size:"sm"},on:{click:t.clearSearch}},[a("i",{staticClass:"fas fa-eraser"}),t._v("清除條件 ")])],1),a("header",{staticClass:"dtc-grid-header my-dark ml-1",staticStyle:{margin:"0"}},[a("div",[t._v("操作")]),t._l(t.headers,(function(e,n){return a("div",{key:n,on:{click:function(a){return t.sort(e)}}},[t._v(" "+t._s(e.name)+" "),a("span",{directives:[{name:"show",rawName:"v-show",value:null===e.sortDesc,expression:"item.sortDesc === null"}]},[a("i",{staticClass:"fas fa-sort"})]),a("span",{directives:[{name:"show",rawName:"v-show",value:!1===e.sortDesc,expression:"item.sortDesc === false"}]},[a("i",{staticClass:"fas fa-sort-up"})]),a("span",{directives:[{name:"show",rawName:"v-show",value:e.sortDesc,expression:"item.sortDesc"}]},[a("i",{staticClass:"fas fa-sort-down"})])])}))],2),t.items.length?t._e():a("main",{staticClass:"dtc-grid-header main-dtc-body ml-1"},[a("div",{staticStyle:{"grid-column":"1 / -1",padding:"20px 0px","font-size":"24px",color:"black"}},[t._v(" 暫無資料 ")])]),t._l(t.items,(function(e,n){return a("main",{key:n,staticClass:"dtc-grid-header main-dtc-body ml-1",staticStyle:{color:"black"},style:n%2==0?"background-color: #F5F5F5;":"background-color: #E0E0E0;"},[a("div",{staticStyle:{display:"grid","grid-template-columns":"max-content max-content"}},[a("b-button",{staticClass:"mx-2",attrs:{size:"sm",variant:"info"}},[t._v("報告撰寫")]),a("b-form-checkbox",{staticClass:"ml-1",staticStyle:{"margin-top":"2px"},attrs:{disabled:!e.comment.length,switch:""},on:{change:function(a){return t.viewComment(e)}},model:{value:e.viewItemComment,callback:function(a){t.$set(e,"viewItemComment",a)},expression:"item.viewItemComment"}},[t._v("查看留言")])],1),a("div",{staticStyle:{cursor:"pointer"},on:{click:function(a){return t.addComment(e)}}},[t._v(t._s(e.comment.length)+" "),a("i",{staticClass:"fas fa-plus-circle"})]),a("div",[t._v("NT"+t._s(t.$formatPrice(e.paidAmount)))]),a("div",[t._v(t._s(t.$formatStatus(e.status)))]),a("div",[t._v(t._s(t.$twDate(e.orderDate)))]),a("div",[t._v(t._s(e.orderPhoneNum))]),a("div",{style:e.isCancer?"color:red;":""},[t._v(t._s(e.isCancer?"是":"否"))]),a("div",[t._v(t._s(e.hardCopyReceived?"是":"否"))]),a("div",[t._v(t._s(e.copySendBack?"是":"否"))]),a("div",[t._v(t._s(e.docHasCopy?"是":"否"))]),e.addNewComment?a("nav",{staticClass:"mb-2 add-comment"},[a("b-textarea",{staticStyle:{width:"99vw"},attrs:{placeholder:"請在此輸入留言...","no-resize":"",spellcheck:"false",rows:"4"},model:{value:e.addedComment,callback:function(a){t.$set(e,"addedComment",a)},expression:"item.addedComment"}}),a("b-button",{staticClass:"mt-1 mr-2",staticStyle:{float:"left"},attrs:{disabled:!e.addedComment,variant:"primary",size:"sm"},on:{click:function(a){return t.addNewDoctorComment(e)}}},[t._v("新增留言")]),a("b-button",{staticClass:"mt-1",staticStyle:{float:"left"},attrs:{size:"sm"},on:{click:function(a){return t.hideTextarea(e)}}},[t._v("取消")])],1):t._e(),e.viewComment?a("footer",t._l(e.comment,(function(e,n){return a("main",{key:n},[a("section",{staticClass:"mb-1",staticStyle:{color:"white"},style:e.docComment?"background:#1f7cd3;":"background:#0f579b;"},[a("div",[e.docComment?a("span",{staticClass:"mr-2"},[a("i",{staticClass:"fas fa-hospital-user"})]):a("span",{staticClass:"mr-2"},[a("i",{staticClass:"fas fa-chevron-circle-right"})]),t._v(" "+t._s(t.$twDate(e.commentAt))+" ")]),a("div",{staticClass:"pb-3"},[t._v(t._s(e.docComment||e.userComment))])])])})),0):t._e()])})),a("footer",{staticClass:"dtx-footer"},[a("b-pagination",{staticClass:"mt-2",attrs:{"total-rows":t.rowCount,"per-page":t.pagingRowPerPage,"aria-controls":"dataTable1",align:"center"},scopedSlots:t._u([{key:"page",fn:function(e){var n=e.page,s=e.active;return a("span",{},[a(s?"b":"i",[t._v(t._s(n))])])}}]),model:{value:t.currentPageNum,callback:function(e){t.currentPageNum=e},expression:"currentPageNum"}},[a("span",{attrs:{slot:"first-text"},slot:"first-text"},[a("i",{staticClass:"fas fa-fast-backward"})]),a("span",{attrs:{slot:"prev-text"},slot:"prev-text"},[a("i",{staticClass:"fas fa-step-backward"})]),a("span",{attrs:{slot:"next-text"},slot:"next-text"},[a("i",{staticClass:"fas fa-step-forward"})]),a("span",{attrs:{slot:"last-text"},slot:"last-text"},[a("i",{staticClass:"fas fa-fast-forward"})])]),a("b-select",{staticClass:"mt-2",attrs:{options:t.rows},model:{value:t.pagingRowPerPage,callback:function(e){t.pagingRowPerPage=e},expression:"pagingRowPerPage"}}),a("div",{staticClass:"mt-3",staticStyle:{color:"black"}},[t._v(t._s(t.totalCountStr))])],1)],2)},r=[],c=(a("4160"),a("ac1f"),a("841c"),a("159b"),a("5530")),o=(a("96cf"),a("1da1")),i=a("2909");a("72bf"),a("9ab4");(function(t){t["sum"]="sum",t["min"]="min",t["max"]="max",t["average"]="average",t["countdistinct"]="countdistinct"})(n||(n={}));var u=a("3aec"),d=(a("c1df"),[{name:"留言數量",key:"comment",sortDesc:null},{name:"支付金額",key:"paidAmount",sortDesc:null},{name:"處理狀態",key:"status",sortDesc:null},{name:"下單日期",key:"orderDate",sortDesc:null},{name:"客戶電話",key:"orderPhoneNum",sortDesc:null},{name:"癌症",key:"isCancer",sortDesc:null},{name:"收到快遞",key:"hardCopyReceived",sortDesc:null},{name:"寄回快遞",key:"copySendBack",sortDesc:null},{name:"醫生收到快遞",key:"docHasCopy",sortDesc:null}]),l=[10,20,50],m={name:"totalSpendPhraseBlackList",data:function(){return{orderBy:[],Code:"",Text:"",dtcPublic:!1,showEdit:!1,number:"",name:"",id:"",headers:d,items:[],currentPageNum:1,rowCount:0,pagingRowPerPage:20,search:!1,rows:l,totalCountStr:"",editItem:"",toggleComment:!1}},components:{},computed:{myEditItem:function(){return u["c"].editItem}},methods:{hideTextarea:function(t){t.addNewComment=t.addNewDoctorComment="",this.items=Object(i["a"])(this.items)},addNewDoctorComment:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n={},n.docComment=t.addedComment,n.commentAt=(new Date).toISOString(),n.rating=0,n.userComment="",t.comment.unshift(n),a.prev=6,a.next=9,u["a"].updateOrder(t);case 9:t.addedComment="",t.addNewComment="",e.items=Object(i["a"])(e.items),e.$bvToast.toast("新增留言成功",{title:"系統資訊",autoHideDelay:5e3,variant:"success"}),a.next=18;break;case 15:a.prev=15,a.t0=a["catch"](6),alert(a.t0);case 18:case"end":return a.stop()}}),a,null,[[6,15]])})))()},addComment:function(t){t.viewComment=!0,t.addNewComment=!0,this.toggleComment=!0,this.items=Object(i["a"])(this.items)},viewComment:function(t){var e=this;requestAnimationFrame((function(){t.viewComment?t.viewComment=!1:t.viewComment=!0,e.items=Object(i["a"])(e.items)}))},sort:function(t){var e=this;t.sortDesc?t.sortDesc=null:!1===t.sortDesc?t.sortDesc=!0:null===t.sortDesc&&(t.sortDesc=!1),this.orderBy=[],this.headers.forEach((function(t){null!==t.sortDesc&&e.orderBy.push(t.sortDesc?"".concat(t.key," desc"):"".concat(t.key))})),this.getData()},addNewBlackPhrase:function(){this.$bvModal.show("dtcAddBlacklist")},del:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,u["a"].deleteBlackWord(t.Id);case 3:e.getData(),a.next=9;break;case 6:a.prev=6,a.t0=a["catch"](0),alert(a.t0);case 9:case"end":return a.stop()}}),a,null,[[0,6]])})))()},editMyItem:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:u["c"].editItem=Object(c["a"])({},t),e.$bvModal.show("dtcEditBlackWord");case 2:case"end":return a.stop()}}),a)})))()},closePhraseUi:function(){u["c"].showPhraseDlg=!1},edit:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,u["a"].getInfoById(t.Id);case 2:u["c"].editItem=a.sent,e.$router.push("details");case 4:case"end":return a.stop()}}),a)})))()},updateStatus:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n={Id:t.Id,Word:t.Word,IsActivated:!t.IsActivated,CreateTime:t.CreateTime,CreateAccountNo:t.CreateAccountNo},a.prev=1,a.next=4,u["a"].editBlackWord(n);case 4:e.$bvToast.toast("啟用狀態更新成功",{title:"黑名單管理",autoHideDelay:5e3,variant:"success"}),a.next=10;break;case 7:a.prev=7,a.t0=a["catch"](1),e.$bvToast.toast("啟用狀態更新失敗 "+a.t0,{title:"黑名單管理",autoHideDelay:5e3,variant:"danger"});case 10:case"end":return a.stop()}}),a,null,[[1,7]])})))()},searchDb:function(){this.search=!0,this.getData()},clearSearch:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.Code="",t.search=!1,t.getData();case 3:case"end":return e.stop()}}),e)})))()},getData:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,n,s,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a="doctorPhone_eq="+sessionStorage.phone,e.next=3,u["a"].getOrders(a);case 3:n=e.sent,s=n.items,r=n.count,t.items=s,t.rowCount=r,t.totalCountStr="共".concat(r," 筆");case 9:case"end":return e.stop()}}),e)})))()}},mounted:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.getData();case 1:case"end":return e.stop()}}),e)})))()},watch:{currentPageNum:function(t){this.currentPageNum=t,this.getData().catch((function(t){}))},pagingRowPerPage:function(t){this.getData().catch((function(t){}))},myEditItem:function(){this.getData().catch((function(t){}))}}},f=m,v=(a("f0dd"),a("2877")),h=Object(v["a"])(f,s,r,!1,null,"97c20a00",null);e["default"]=h.exports},"841c":function(t,e,a){"use strict";var n=a("d784"),s=a("825a"),r=a("1d80"),c=a("129f"),o=a("14c3");n("search",1,(function(t,e,a){return[function(e){var a=r(this),n=void 0==e?void 0:e[t];return void 0!==n?n.call(e,a):new RegExp(e)[t](String(a))},function(t){var n=a(e,t,this);if(n.done)return n.value;var r=s(t),i=String(this),u=r.lastIndex;c(u,0)||(r.lastIndex=0);var d=o(r,i);return c(r.lastIndex,u)||(r.lastIndex=u),null===d?-1:d.index}]}))},"84d3":function(t,e,a){},f0dd:function(t,e,a){"use strict";a("84d3")}}]);
//# sourceMappingURL=chunk-933e19d4.2d7b7c31.js.map