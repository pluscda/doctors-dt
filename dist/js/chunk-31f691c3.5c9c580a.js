(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-31f691c3"],{"4d99":function(e,t,n){"use strict";n("9671")},"81e5":function(e,t,n){"use strict";n("c265")},9671:function(e,t,n){},"9b24":function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"zh-tw":{"title":"名醫會館"},"zh-cn":{"title":"名医会馆"}}'),delete e.options._Ctor}},a55b:function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"dtc-login",style:e.isLogin?"":"justify-content: center;"},[n("PhoneLogin")],1)},r=[],s=(n("caad"),n("fb6a"),n("2532"),n("3aec")),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"dtc-phone"},[n("van-overlay",{staticStyle:{"z-index":"9999"},attrs:{show:e.showMask},on:{click:function(t){e.showMask=!1}}},[n("van-loading",{staticClass:"mt-4",attrs:{type:"spinner"}})],1),n("main",[e._m(0),n("div",{staticClass:"phone-div"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.phone,expression:"phone"}],attrs:{placeholder:"請輸入手機號碼",minlength:"10",maxlength:"10"},domProps:{value:e.phone},on:{input:function(t){t.target.composing||(e.phone=t.target.value)}}})]),n("div",{staticClass:"phone-div mt-3 short-code"},[n("div",{directives:[{name:"show",rawName:"v-show",value:10==e.phone.length,expression:"phone.length == 10"}],staticClass:"code-btn",on:{click:e.register}},[e._v("獲取短信驗證碼")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.code,expression:"code"},{name:"show",rawName:"v-show",value:e.needCode,expression:"needCode"}],attrs:{placeholder:"請輸入短信驗證碼",minlength:"6",maxlength:"6"},domProps:{value:e.code},on:{input:function(t){t.target.composing||(e.code=t.target.value)}}})]),n("div",{directives:[{name:"show",rawName:"v-show",value:e.enableLogin,expression:"enableLogin"}],staticClass:"login",on:{click:e.confirmSMSCode}},[e._v("登入")])]),n("button",{attrs:{id:e.recaptchaDomId,note:"google requried this invisable div"}})],1)},a=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("h2",[n("span",{staticClass:"mr-3"},[n("i",{staticClass:"fas fa-sign-in-alt"})]),e._v("DTC Health 健康通行證 ")])}],c=(n("96cf"),n("1da1")),u=n("2b0e"),l={name:"login",data:function(){return{showKeyboard:!0,phone:"0928012500",needCode:"",code:"654321",confirmationSMSCodeResult:"",user:"",jwt:"",recaptchaDomId:"sign-in-button",showMask:!1}},computed:{isLogin:function(){return sessionStorage.isLogin||s["c"].isLogin},enableLogin:function(){return this.code&&6==this.code.length&&!isNaN(this.code)&&this.needCode}},methods:{register:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.showMask=!0,t.next=4,s["a"].registerByMobilePhone("+886".concat(e.phone),e.recaptchaDomId);case 4:e.confirmationSMSCodeResult=t.sent,e.needCode=!0,e.showMask=!1,t.next=13;break;case 9:t.prev=9,t.t0=t["catch"](0),u["default"].$toast.error("請檢查電話號碼是否正確"),e.showMask=!1;case 13:case"end":return t.stop()}}),t,null,[[0,9]])})))()},confirmSMSCode:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.showMask=!0,t.next=4,e.confirmationSMSCodeResult.confirm(e.code);case 4:t.next=11;break;case 6:t.prev=6,t.t0=t["catch"](0),location.reload(),u["default"].$toast.error("請檢查驗證號碼"+t.t0),e.showMask=!1;case 11:return t.prev=11,t.next=14,e.loginStrapi();case 14:n=t.sent,o=n.jwt,o||e.registerStrapi();case 17:return t.prev=17,sessionStorage.token=e.jwt,localStorage.token=e.jwt,e.user=JSON.stringify(e.user,null,2),e.showMask=!1,s["b"].login(e.phone),t.finish(17);case 24:case"end":return t.stop()}}),t,null,[[0,6],[11,,17,24]])})))()},registerStrapi:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var n,o,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,s["a"].registerStrapi({username:e.phone,password:s["c"].PASSWORD});case 2:n=t.sent,o=n.user,r=n.jwt,r&&(e.user=o,s["c"].isDoctor=o.isDoctor?"true":"",e.jwt=r,e.$router.push("paidList?isdoc=true"));case 6:case"end":return t.stop()}}),t)})))()},loginStrapi:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var n,o,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,s["a"].loginStrapi({identifier:e.phone,password:s["c"].PASSWORD});case 3:return n=t.sent,o=n.user,r=n.jwt,r&&(e.user=o,s["c"].isDoctor=o.isDoctor?"true":"",e.jwt=r,e.$router.push("paidList?isdoc=true")),t.abrupt("return",{jwt:r});case 10:return t.prev=10,t.t0=t["catch"](0),t.abrupt("return",{jwt:""});case 13:case"end":return t.stop()}}),t,null,[[0,10]])})))()}},mounted:function(){}},d=l,p=(n("81e5"),n("2877")),h=n("ef12"),f=Object(p["a"])(d,i,a,!1,null,"ea5b4a78",null);"function"===typeof h["default"]&&Object(h["default"])(f);var m=f.exports,g=["預約紀錄(6)","提問(5)","意見反饋(1)","我的收藏(2)","系統設置"],v=["共有6筆記錄","你有一則已答覆","廠商有兩則反饋","你有兩個收藏","客製化個人設定"],w={name:"loginHome",data:function(){return{titles:g,labels:v,phone:sessionStorage.phone,idDoc:location.href.includes("isdoc=true")}},computed:{isLogin:function(){return sessionStorage.isLogin||s["c"].isLogin},myPhone:function(){var e=sessionStorage.phone?sessionStorage.phone.slice(0,6):"";return e}},components:{PhoneLogin:m},methods:{open:function(e,t){0==t&&this.$router.push("myorderlist")},logout:function(){s["b"].logout(),s["c"].activeTab=0,this.$router.push("home"),location.reload(!0)}},mounted:function(){s["c"].activeTab=3},watch:{}},b=w,S=(n("4d99"),n("edc3")),_=Object(p["a"])(b,o,r,!1,null,"3a240b82",null);"function"===typeof S["default"]&&Object(S["default"])(_);t["default"]=_.exports},b6d8:function(e,t){e.exports=function(e){e.options.__i18n=e.options.__i18n||[],e.options.__i18n.push('{"zh-tw":{"登入":"登入","健康通行證":"登入健康通行證","手機號碼":"手機號碼","24小時不限次數與醫生面對面諮詢立即開通":"24小時不限次數與醫生面對面諮詢立即開通"},"zh-cn":{"登入":"登入","健康通行證":"登入健康通行證","手機號碼":"手機號碼","24小時不限次數與醫生面對面諮詢立即開通":"24小時不限次數與醫生面對面諮詢立即開通"}}'),delete e.options._Ctor}},c265:function(e,t,n){},edc3:function(e,t,n){"use strict";var o=n("9b24"),r=n.n(o);t["default"]=r.a},ef12:function(e,t,n){"use strict";var o=n("b6d8"),r=n.n(o);t["default"]=r.a}}]);
//# sourceMappingURL=chunk-31f691c3.5c9c580a.js.map